!function(e,r){"use strict";function i(i,n){var a=1;return{restrict:"AE",scope:{url:"=",peaks:"=?",options:"="},templateUrl:"../dist/template/wavesurfer.html",link:function(s,o){var u=o.find("div.audio")[0],t=0,l={hideScrollbar:!0,height:50,waveColor:"#337ab7",normalize:!0,progressColor:"#23527c",container:u},f=e.extend(l,s.options);u.style.height=f.height+"px",s.isVolumeActive=!1,s.volumeLevel=50,s.isPlaying=!1,s.isLoading=!1,s.uniqueId="waveform_"+a++,s.progress=0,s.remaining=0;var v=function(){t=Math.floor(s.wavesurfer.getDuration()),s.$emit("wavesurfer:stopAll"),n(function(){s.remaining=t,s.isLoading=!1,s.playPause()})},c=function(e){n(function(){s.progress=e,s.remaining=t-e})},w=function(){s.isPlaying=!1,s.wavesurfer.seekTo(0)},p=function(e){s.wavesurfer=r.create(f),s.wavesurfer.load(s.url,e||null),s.wavesurfer.on("ready",v),s.wavesurfer.backend.on("audioprocess",c),s.wavesurfer.on("finish",w),s.$watch("volume",function(e){e&&s.wavesurfer.setVolume(e/100)})};s.load=function(){e.isDefined(s.wavesurfer)?(s.wavesurfer.isPlaying()||s.$emit("wavesurfer:stopAll"),s.playPause()):(s.isLoading=!0,p(s.peaks))},s.playPause=function(){s.isPlaying=!s.isPlaying,s.isVolumeActive=!1,s.wavesurfer.playPause()},s.pause=function(){s.wavesurfer.pause(),s.isPlaying=!1},s.stop=function(){s.wavesurfer.stop(),s.isPlaying=!1},i.$on("wavesurfer:stopAll",function(){e.isDefined(s.wavesurfer)&&s.stop()})}}}function n(){return function(e){var r=parseInt(e,10),i=Math.floor(r/3600),n=Math.floor((r-3600*i)/60),a=r-3600*i-60*n;return 10>i&&(i="0"+i),10>n&&(n="0"+n),10>a&&(a="0"+a),n+":"+a}}var a=e.module("wavesurfer.angular",["ui.slider"]);a.directive("wavesurfer",i).filter("hms",n)}(window.angular,window.WaveSurfer);